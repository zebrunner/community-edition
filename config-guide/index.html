


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.2.2">
    
    
      
        <title>Configuration Guide - Zebrunner</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a2408e81.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#configuration-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="Zebrunner" class="md-header-nav__button md-logo" aria-label="Zebrunner">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Zebrunner
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Configuration Guide
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/zebrunner/zebrunner/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Zebrunner" class="md-nav__button md-logo" aria-label="Zebrunner">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Zebrunner
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/zebrunner/zebrunner/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../prerequisites/" title="Prerequisites" class="md-nav__link">
      Prerequisites
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../install-guide/" title="Installation Guide" class="md-nav__link">
      Installation Guide
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Configuration Guide
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Configuration Guide" class="md-nav__link md-nav__link--active">
      Configuration Guide
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#organization-setup" class="md-nav__link">
    Organization Setup
  </a>
  
    <nav class="md-nav" aria-label="Organization Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#register-organization" class="md-nav__link">
    Register Organization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register-repository" class="md-nav__link">
    Register Repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-webhook-events-push-and-pull-requests" class="md-nav__link">
    Setup webhook events (push and pull requests)
  </a>
  
    <nav class="md-nav" aria-label="Setup webhook events (push and pull requests)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-required-credentials" class="md-nav__link">
    Configure required credentials
  </a>
  
    <nav class="md-nav" aria-label="Configure required credentials">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#github-access-token" class="md-nav__link">
    Github access token
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlab-access-token" class="md-nav__link">
    Gitlab access token
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bitbucket-cloud-token" class="md-nav__link">
    BitBucket Cloud token
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-jenkins-credentials" class="md-nav__link">
    Update Jenkins Credentials
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-webhooks" class="md-nav__link">
    Configure Webhooks
  </a>
  
    <nav class="md-nav" aria-label="Configure Webhooks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#github-configure-webhook-for-pushes-and-pull-requests" class="md-nav__link">
    GitHub: Configure Webhook for Pushes and Pull Requests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlab-configure-webhook-for-pushes-and-pull-requests" class="md-nav__link">
    Gitlab: Configure Webhook for Pushes and Pull Requests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bitbucket-cloud-configure-webhook-for-pushes" class="md-nav__link">
    BitBucket Cloud: Configure Webhook for Pushes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sonarqube-integration" class="md-nav__link">
    SonarQube Integration
  </a>
  
    <nav class="md-nav" aria-label="SonarQube Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integrate-private-sonarqube-server" class="md-nav__link">
    Integrate private sonarqube server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#github-configuration" class="md-nav__link">
    GitHub configuration
  </a>
  
    <nav class="md-nav" aria-label="GitHub configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-github-app" class="md-nav__link">
    Create a GitHub App
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-your-app" class="md-nav__link">
    Install your app
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-sonarqube-with-your-app" class="md-nav__link">
    Configure sonarqube with your app
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pull-request-decoration-example" class="md-nav__link">
    Pull Request decoration example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlab-configuration" class="md-nav__link">
    Gitlab configuration
  </a>
  
    <nav class="md-nav" aria-label="Gitlab configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#merge-request-decoration-exmaple" class="md-nav__link">
    Merge request decoration exmaple
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-sonarqube-base-url" class="md-nav__link">
    Configure sonarqube base URL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support-channel" class="md-nav__link">
    Support Channel
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../user-guide/" title="User Guide" class="md-nav__link">
      User Guide
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#organization-setup" class="md-nav__link">
    Organization Setup
  </a>
  
    <nav class="md-nav" aria-label="Organization Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#register-organization" class="md-nav__link">
    Register Organization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register-repository" class="md-nav__link">
    Register Repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-webhook-events-push-and-pull-requests" class="md-nav__link">
    Setup webhook events (push and pull requests)
  </a>
  
    <nav class="md-nav" aria-label="Setup webhook events (push and pull requests)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-required-credentials" class="md-nav__link">
    Configure required credentials
  </a>
  
    <nav class="md-nav" aria-label="Configure required credentials">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#github-access-token" class="md-nav__link">
    Github access token
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlab-access-token" class="md-nav__link">
    Gitlab access token
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bitbucket-cloud-token" class="md-nav__link">
    BitBucket Cloud token
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-jenkins-credentials" class="md-nav__link">
    Update Jenkins Credentials
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-webhooks" class="md-nav__link">
    Configure Webhooks
  </a>
  
    <nav class="md-nav" aria-label="Configure Webhooks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#github-configure-webhook-for-pushes-and-pull-requests" class="md-nav__link">
    GitHub: Configure Webhook for Pushes and Pull Requests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlab-configure-webhook-for-pushes-and-pull-requests" class="md-nav__link">
    Gitlab: Configure Webhook for Pushes and Pull Requests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bitbucket-cloud-configure-webhook-for-pushes" class="md-nav__link">
    BitBucket Cloud: Configure Webhook for Pushes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sonarqube-integration" class="md-nav__link">
    SonarQube Integration
  </a>
  
    <nav class="md-nav" aria-label="SonarQube Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integrate-private-sonarqube-server" class="md-nav__link">
    Integrate private sonarqube server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#github-configuration" class="md-nav__link">
    GitHub configuration
  </a>
  
    <nav class="md-nav" aria-label="GitHub configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-github-app" class="md-nav__link">
    Create a GitHub App
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-your-app" class="md-nav__link">
    Install your app
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-sonarqube-with-your-app" class="md-nav__link">
    Configure sonarqube with your app
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pull-request-decoration-example" class="md-nav__link">
    Pull Request decoration example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlab-configuration" class="md-nav__link">
    Gitlab configuration
  </a>
  
    <nav class="md-nav" aria-label="Gitlab configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#merge-request-decoration-exmaple" class="md-nav__link">
    Merge request decoration exmaple
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-sonarqube-base-url" class="md-nav__link">
    Configure sonarqube base URL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support-channel" class="md-nav__link">
    Support Channel
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/zebrunner/zebrunner/edit/master/docs/config-guide.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="configuration-guide">Configuration Guide</h1>
<h2 id="organization-setup">Organization Setup</h2>
<h3 id="register-organization">Register Organization</h3>
<ul>
<li>Open Jenkins-&gt;Management_Jobs folder.</li>
<li>Run "RegisterOrganization" providing your organization name as folderName</li>
<li>New folder is created with default content <br />
<img alt="Alt text" src="https://github.com/zebrunner/zebrunner/blob/develop/docs/img/Organization.png?raw=true" title="Organization" /></li>
</ul>
<h3 id="register-repository">Register Repository</h3>
<ul>
<li>Open your organization folder</li>
<li>Open RegisterRepository Job</li>
<li>Select the scm type of your repository(GitHub, Gitlab or BitBucket)</li>
<li>Add your TestNG repository url (use https://github.com/qaprosoft/carina-demo.git as sample repo to scan)</li>
<li>Click build
   <img alt="Alt text" src="https://github.com/qaprosoft/qps-infra/blob/develop/docs/img/Repository.png?raw=true" title="Repository" /><blockquote>
<p>Note: Repository is scanned and TestNG jobs created</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>Note: https and ssh cloning are suported, make sure that you repository url ends up with <strong>.git</strong></p>
</blockquote>
<h3 id="setup-webhook-events-push-and-pull-requests">Setup webhook events (push and pull requests)</h3>
<p>In order to enable full ci/cd workflow you need to add a webhook to your repository registered in Zebrunner, this webhook will trigger onPush and onPullRequests events on the ci component(Jenkins by default) as builds. </p>
<p>After each Push and Pull Request events, related Jenkins jobs will pull your repository, build your code and execute the sonarqube analysis.</p>
<h4 id="configure-required-credentials">Configure required credentials</h4>
<p>After you register a repository a jenkins credential is generated with the format of <code>orgName-scmType-webhook-token</code>, this credential needs to be updated with a personal access token generated in your repository scm.</p>
<blockquote>
<p>Note: this jenkins credentials are globally used for each repository of an organization registered in zebrunner.</p>
</blockquote>
<h5 id="github-access-token">Github access token</h5>
<ul>
<li>Follow steps 1-9 <a href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/creating-a-personal-access-token">here</a> to create your GitHub personal access token.</li>
<li>Grant access for the following permissions: <strong>repo and admin:repo_hook</strong>.</li>
</ul>
<h5 id="gitlab-access-token">Gitlab access token</h5>
<ul>
<li>Follow steps 1-7 <a href="https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html#creating-a-personal-access-token">here</a> to create your Gitlab personal access token.</li>
<li>In step <strong>5</strong> select the <strong>api, read_repository, write_repositoryi</strong> scopes.</li>
</ul>
<h5 id="bitbucket-cloud-token">BitBucket Cloud token</h5>
<ul>
<li>Open your terminal and run the following command <code>echo -n username:password | base64</code> where username and password are your BitBucket credentials, this will return a token encoded in base64.</li>
</ul>
<blockquote>
<p>Note: make sure to copy your token as your are going to need it in the <strong>Configure Webhooks</strong> and <strong>Update Jenkins Credentials</strong> sections.</p>
</blockquote>
<h5 id="update-jenkins-credentials">Update Jenkins Credentials</h5>
<ul>
<li>Go to <strong>Jenkins &gt; Manage Jenkins &gt; Manage credentials</strong>.</li>
<li>Find your credential and click on the id.</li>
<li>Update the <strong>Secret text</strong> with your correspondant scm token.</li>
<li>Click save.</li>
</ul>
<h4 id="configure-webhooks">Configure Webhooks</h4>
<h5 id="github-configure-webhook-for-pushes-and-pull-requests">GitHub: Configure Webhook for Pushes and Pull Requests</h5>
<ul>
<li>Go to your <strong>GitHub repository page &gt; Settings &gt; Webhooks &gt; Add webhook</strong>.</li>
<li>Add <code>http://your-zebrunner-domain.com/jenkins/generic-webhook-trigger/invoke?token=github-token-here</code> into "Payload URL" field.</li>
<li>Select application/json in "Content Type" field.</li>
<li>Click <strong>Let me select individual events</strong> and select <strong>Pushes, Pull Requests</strong>.</li>
<li>Click <strong>Add webhook</strong>.</li>
</ul>
<h5 id="gitlab-configure-webhook-for-pushes-and-pull-requests">Gitlab: Configure Webhook for Pushes and Pull Requests</h5>
<ul>
<li>Go to your <strong>Gitlab repository page &gt; Settings &gt; Webhooks</strong>.</li>
<li>Add <code>http://your-zebrunner-domain.com/jenkins/generic-webhook-trigger/invoke?token=gitlab-token-here</code> into "Payload URL" field.</li>
<li>Select application/json in "Content Type" field.</li>
<li>Select <strong>Push and Merge Requests events</strong>.</li>
<li>Click <strong>Add webhook</strong>.</li>
</ul>
<h5 id="bitbucket-cloud-configure-webhook-for-pushes">BitBucket Cloud: Configure Webhook for Pushes</h5>
<ul>
<li>Go to your <strong>BitBucket repository page &gt; Repository Settings &gt; Webhooks &gt; add webhook</strong>.</li>
<li>Enter <code>http://your-zebrunner-domain.com/jenkins/generic-webhook-trigger/invoke?token=bitbucket-token-here</code> into <strong>URL</strong> field.</li>
<li>Check that <strong>Repository push</strong> is selected.</li>
<li>Click <strong>Save</strong>.</li>
</ul>
<h2 id="sonarqube-integration">SonarQube Integration</h2>
<p>The sonarqube static analysis is invoked for each webhook event triggered on your target repository(pushes and/or pull/merge requests).</p>
<p>If the event is a pull/merge request the reports from the sonarqube analysis will be decorated into the pull request itself for the correspondant scm system. On the contrary, only the analysis will run for push events.</p>
<blockquote>
<p>Note: default credentials for embedded sonarqube are: admin/admin, we recommend changing them after setting up zebrunner</p>
<p>Note: Sonarqube pull request decoration is supported for <strong>Github</strong> and <strong>Gitlab</strong></p>
<p>Note: if the sonarqube server is not available the analysis will be skipped</p>
</blockquote>
<h3 id="integrate-private-sonarqube-server">Integrate private sonarqube server</h3>
<p>If you have a private sonarqube instance and you have decided to use it, please follow the steps bellow:</p>
<ul>
<li>Login to Jenkins, go to <strong>Manage Jenkins &gt; System Configuration &gt; Global Properties</strong></li>
<li>Search for <strong>SONAR_URL</strong> and change the value with your private SonarQube instance url<blockquote>
<p>Note: Compatible SonarQube version is 7.9.3 - 8.0</p>
</blockquote>
</li>
</ul>
<h3 id="github-configuration">GitHub configuration</h3>
<p>To enable <strong>pull reqeuest decoration</strong> on your github repository you need to create a <strong>GitHub App</strong>, his purpose is to publish the sonarqube reports generated on the webhook event being processed as <strong>checks</strong> into the pull request itself on github. </p>
<h4 id="create-a-github-app">Create a <a href="https://developer.github.com/apps/about-apps/">GitHub App</a></h4>
<ul>
<li>Follow Steps 1â€“4 <a href="https://developer.github.com/apps/building-github-apps/creating-a-github-app/">here</a> to start creating your GitHub App</li>
<li>Under <strong>GitHub App name</strong>, give your app a name, such as SonarQubePRDecorator.</li>
<li>Add a <strong>Homepage URL</strong>. GitHub requires this, but it isn't important for Pull Request decoration. You can use any URL, such as https://zebrunner.com/.</li>
<li>Enter your <strong>User authorization callback URL</strong>. Set this to your instance's base URL. For example, <code>https://your-zebrunner-domain/sonarqube/oauth2/callback</code></li>
<li>Add <strong>Webhook URL</strong>. Set this to your instance's base URL. For example, https://zebrunner.com/.</li>
<li>
<p>Grant access for the following <strong>Permissions</strong>:</p>
<table>
<thead>
<tr>
<th align="center">Permission</th>
<th>Access</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Checks</td>
<td>Read &amp; Write</td>
</tr>
<tr>
<td align="center">Metadata</td>
<td>Read-Only</td>
</tr>
<tr>
<td align="center">Pull Requests</td>
<td>Read &amp; Write</td>
</tr>
<tr>
<td align="center">Commit statuses</td>
<td>Read-only</td>
</tr>
<tr>
<td align="center">&gt; Note: if your are using <strong>Github Enterprise</strong> the permission "Metadata" is renamed to "Repository Metadata"</td>
<td></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Under "Where can this GitHub App be installed?," select <strong>Any account.</strong></p>
</li>
<li>Click <strong>Create GitHub App</strong>. This will take you to your new GitHub App's page.</li>
<li>Scroll down to the bottom of your app page and click <strong>Generate Private Key.</strong> This downloads a .pem file that you'll use in the <strong>Configure SonarQube server section.</strong><blockquote>
<p>Tip: in order to acces the private key open the .pem file with your favorite text editor.</p>
</blockquote>
</li>
</ul>
<h4 id="install-your-app">Install your app</h4>
<p>Once the app is created, you need to install it in your target organization to <strong>grant acces</strong> to all of your repositories with the permissions specified in the <strong>Create a [GitHub App]</strong> section.</p>
<p>Install your GitHub App from the app's settings page.</p>
<ul>
<li>Go to your <strong>GitHub profile &gt; Developer settings &gt; GitHub Apps &gt; Your app name &gt; Install App</strong></li>
<li>Select the organization to install the app</li>
<li>Select <strong>All repositories</strong></li>
<li>Click install<blockquote>
<p>Note: You can select specific repositories, so the github application will have access <strong>only for those specified</strong></p>
</blockquote>
</li>
</ul>
<h4 id="configure-sonarqube-with-your-app">Configure sonarqube with your app</h4>
<ul>
<li>Login into your sonarqube instance</li>
<li>
<p>Go to <strong>Administration &gt; Configuration &gt; GitHub</strong> add your GitHub App <strong>Client ID, Client Secret</strong>
  <img alt="Alt text" src="https://github.com/qaprosoft/qps-infra/blob/develop/docs/img/SonarGitHubConfig.png?raw=true" title="SonarGitHubConfig" /></p>
</li>
<li>
<p>In <strong>Administration &gt; Configuration &gt; Pull Request</strong> add your GitHub <strong>App ID, App Name, App Private Key</strong>
  <img alt="Alt text" src="https://github.com/qaprosoft/qps-infra/blob/develop/docs/img/SonarPullRequestConfig.png?raw=true" title="SonarPullRequestConfig" /></p>
</li>
</ul>
<blockquote>
<p>Note: make sure to copy all content from the .pem file generated in the <strong>Create GitHub App</strong> section</p>
</blockquote>
<h4 id="pull-request-decoration-example">Pull Request decoration example</h4>
<p>When you create a pull and the sonar analysis reported issues, your pull request will be decorated with those issues and links to the sonarqube instance holding your project.</p>
<p><img alt="Alt text" src="https://github.com/zebrunner/zebrunner/blob/master/docs/img/github-pr-deco1.png?raw=true" title="github-pr-deco1" />
<img alt="Alt text" src="https://github.com/zebrunner/zebrunner/blob/master/docs/img/github-pr-deco2.png?raw=true" title="github-pr-deco2" /></p>
<h3 id="gitlab-configuration">Gitlab configuration</h3>
<p>To enable <strong>merge requests decoration</strong> on your gitlab repository we are going to use the token generated in <strong>Gitlab access token</strong> step. The sonarqube report is published as pipeline status and comments into the merge request itself.</p>
<ul>
<li>Login into your sonarqube instance</li>
<li>Go to <strong>Administration &gt; Configuration &gt; Pull Requests &gt; Integration with Gitlab</strong> and in the token input paste your gitlab acces token.</li>
</ul>
<h4 id="merge-request-decoration-exmaple">Merge request decoration exmaple</h4>
<p>When you create a merge request and the sonar analysis reported issues, your merge request will be decorated with those issues and links to the sonarqube instance holding your project.</p>
<p><img alt="Alt text" src="https://github.com/zebrunner/zebrunner/blob/master/docs/img/gitlab-mr-deco1.png?raw=true" title="gitlab-mr-deco1" />
<img alt="Alt text" src="https://github.com/zebrunner/zebrunner/blob/master/docs/img/gitlab-mr-deco2.png?raw=true" title="gitlab-mr-deco2" /></p>
<h3 id="configure-sonarqube-base-url">Configure sonarqube base URL</h3>
<p>This will serve static context(such as images, links, etc) for pull/merge requests decoration. Follow the below steps to configure your server base URL:</p>
<ul>
<li>Add your SonarQube server under <strong>Administration &gt; Configuration &gt; General Settings &gt; Server base URL</strong>
   <img alt="Alt text" src="https://github.com/qaprosoft/qps-infra/blob/develop/docs/img/SonarBaseUrlConfig.png?raw=true" title="SonarBaseUrlConfig" /><blockquote>
<p>Tip: If you are missing images in your decorated pull/merge request it is probably due to configuration issues or the sonarqube server being unavailable at that moment.</p>
</blockquote>
</li>
</ul>
<h2 id="support-channel">Support Channel</h2>
<ul>
<li>Join <a href="https://t.me/zebrunner">Telegram channel</a> in case of any question</li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../install-guide/" title="Installation Guide" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Installation Guide
              </div>
            </div>
          </a>
        
        
          <a href="../user-guide/" title="User Guide" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                User Guide
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="../assets/javascripts/bundle.5f27aba8.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.27c6a5e6.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>