SET SCHEMA 'zafira';

select check_version(112);

ALTER TABLE DASHBOARDS ADD COLUMN EDITABLE BOOLEAN NOT NULL DEFAULT TRUE;

DO $$
  DECLARE DASHBOARD_ID DASHBOARDS.id%TYPE;

  BEGIN

    SELECT ID INTO DASHBOARD_ID FROM DASHBOARDS WHERE TITLE = 'Stability';
    UPDATE DASHBOARDS SET EDITABLE = FALSE WHERE ID = DASHBOARD_ID;

    SELECT ID INTO DASHBOARD_ID FROM DASHBOARDS WHERE TITLE = 'Personal';
    UPDATE DASHBOARDS SET EDITABLE = FALSE WHERE ID = DASHBOARD_ID;

    SELECT ID INTO DASHBOARD_ID FROM DASHBOARDS WHERE TITLE = 'User Performance';
    UPDATE DASHBOARDS SET EDITABLE = FALSE WHERE ID = DASHBOARD_ID;

    SELECT ID INTO DASHBOARD_ID FROM DASHBOARDS WHERE TITLE = 'General';
    UPDATE DASHBOARDS SET EDITABLE = FALSE WHERE ID = DASHBOARD_ID;

    SELECT ID INTO DASHBOARD_ID FROM DASHBOARDS WHERE TITLE = 'Failures analysis';
    UPDATE DASHBOARDS SET EDITABLE = FALSE WHERE ID = DASHBOARD_ID;


  END$$;

select add_version(112);
