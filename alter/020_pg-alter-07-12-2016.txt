SET SCHEMA 'zafira';

DROP TABLE IF EXISTS EVENTS;
CREATE TABLE IF NOT EXISTS EVENTS (
  ID SERIAL,
  TYPE VARCHAR(45) NOT NULL,
  TEST_RUN_ID VARCHAR(100) NULL,
  TEST_ID VARCHAR(100) NULL,
  DATA TEXT NULL,
  RECEIVED TIMESTAMP NULL,
  MODIFIED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  CREATED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (ID));
CREATE TRIGGER update_timestamp_events BEFORE INSERT OR UPDATE ON EVENTS FOR EACH ROW EXECUTE PROCEDURE update_timestamp();
