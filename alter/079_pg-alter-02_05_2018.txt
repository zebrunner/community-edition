set schema 'zafira';

select check_version(79);

DROP TABLE IF EXISTS FILTERS ;

CREATE TABLE IF NOT EXISTS FILTERS (
  ID SERIAL,
  NAME VARCHAR(50) NOT NULL,
  DESCRIPTION TEXT NULL,
  SUBJECT TEXT NOT NULL,
  PUBLIC_ACCESS BOOLEAN NOT NULL DEFAULT FALSE,
  USER_ID INT NOT NULL,
  MODIFIED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  CREATED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (ID));
  CREATE UNIQUE INDEX FILTERS_NAME_UNIQUE ON FILTERS (NAME);
  CREATE TRIGGER update_timestamp_filters BEFORE INSERT OR UPDATE ON FILTERS FOR EACH ROW EXECUTE PROCEDURE update_timestamp();

select add_version(79);