set schema 'zafira';
 
select check_version(106);

DROP TABLE IF EXISTS SCM ;

CREATE TABLE IF NOT EXISTS SCM (
  ID SERIAL,
  NAME VARCHAR(50) NOT NULL,
  ACCESS_TOKEN VARCHAR(255) NOT NULL,
  ORGANIZATION VARCHAR(255) NULL,
  REPO VARCHAR(255) NULL,
  REPOSITORY_URL VARCHAR(255) NULL,
  USER_ID INT NULL,
  AVATAR_URL VARCHAR(255) NULL,
  MODIFIED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  CREATED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (ID));
  CREATE TRIGGER update_timestamp_scm BEFORE INSERT OR UPDATE ON SCM FOR EACH ROW EXECUTE PROCEDURE update_timestamp();

select add_version(106);
