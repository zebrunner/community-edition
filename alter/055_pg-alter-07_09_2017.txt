set schema 'zafira';

CREATE TABLE IF NOT EXISTS MONITORS (
  ID SERIAL,
  NAME VARCHAR(45) NOT NULL,
  URL VARCHAR(500) NOT NULL,
  HTTP_METHOD VARCHAR(45) NULL,
  REQUEST_BODY TEXT NULL,
  IS_ACTIVE BOOLEAN NOT NULL DEFAULT FALSE,
  TYPE VARCHAR(45) NOT NULL,
  RECIPIENTS VARCHAR(500) NULL,
  CRON_EXPRESSION VARCHAR(45) NOT NULL,
  EXPECTED_RESPONSE_STATUS INT NOT NULL,
  MODIFIED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  CREATED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (ID));
  CREATE UNIQUE INDEX MONITORS_NAME_UNIQUE ON MONITORS (NAME);
  CREATE TRIGGER update_timestamp_monitors BEFORE INSERT OR UPDATE ON MONITORS FOR EACH ROW EXECUTE PROCEDURE update_timestamp();
